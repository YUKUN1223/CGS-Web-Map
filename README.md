# Water of Leith WebMap v4

## ğŸ”§ é‡å¤§ä¿®å¤

### SIMDç­›é€‰é—®é¢˜ä¿®å¤
- **é—®é¢˜**: ä¹‹å‰ä½¿ç”¨`RISK_INDEX`å­—æ®µï¼Œä½†è¯¥å­—æ®µ538æ¡è®°å½•ä¸º0ï¼Œåªæœ‰59æ¡æœ‰å€¼
- **è§£å†³**: æ”¹ç”¨`SIMD_DECILE`å­—æ®µï¼ˆ1-10çš„æ•´æ•°å€¼ï¼‰è¿›è¡Œåˆ†ç±»ç­›é€‰
- **åˆ†ç±»è§„åˆ™**:
  - High Vulnerability (é«˜è„†å¼±æ€§): Decile 1-3 â†’ çº¢è‰²
  - Medium Vulnerability (ä¸­ç­‰): Decile 4-7 â†’ æ©™è‰²  
  - Low Vulnerability (ä½è„†å¼±æ€§): Decile 8-10 â†’ ç»¿è‰²

## âœ¨ æ–°å¢åŠŸèƒ½

### 1. æ•°æ®å¯¼å‡ºåŠŸèƒ½
- ç‚¹å‡»å¯¼èˆªæ "Export"æŒ‰é’®
- æ”¯æŒå¯¼å‡º: æ´ªæ°´æŸå¤±ã€ç»¿åœ°ã€SIMDåŒºåŸŸã€æ±‡æ€»ç»Ÿè®¡
- æ ¼å¼: CSV

### 2. åŒºé—´ç­›é€‰åŠŸèƒ½
- SIMD: æ”¯æŒDecileèŒƒå›´ç­›é€‰(1-10)
- ç»¿åœ°: æ”¯æŒè“„æ°´å®¹é‡èŒƒå›´ç­›é€‰
- å»ºç­‘æŸå¤±: æ”¯æŒä¿æŠ¤ä»·å€¼èŒƒå›´ç­›é€‰

### 3. å›¾è¡¨ä¸åœ°å›¾è”åŠ¨
- **æŸå¤±åˆ†ç±»å›¾è¡¨**: ç‚¹å‡»æŸ±çŠ¶å›¾è‡ªåŠ¨ç­›é€‰è¯¥ç±»å‹å»ºç­‘
- **ç»¿åœ°æ’åå›¾è¡¨**: ç‚¹å‡»æŸ±çŠ¶å›¾è‡ªåŠ¨å®šä½å¹¶é«˜äº®è¯¥ç»¿åœ°

### 4. é¦–é¡µæ•°å­—æ»šåŠ¨åŠ¨ç”»
- ä¿ç•™åŸç‰ˆåŠ¨ç”»æ•ˆæœ
- ä¿®å¤é¡µé¢è‡ªåŠ¨æ»šåˆ°åº•éƒ¨çš„bug

## ğŸ“ é¡¹ç›®ç»“æ„

```
webmap_v4/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app.py              # Flask API (å…³é”®ä¿®å¤åœ¨æ­¤)
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html          # é¦–é¡µ
â”‚   â”œâ”€â”€ map.html            # åœ°å›¾é¡µ
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css       # é¦–é¡µæ ·å¼
â”‚   â”‚   â””â”€â”€ map.css         # åœ°å›¾æ ·å¼
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ main.js         # é¦–é¡µè„šæœ¬(æ•°å­—åŠ¨ç”»)
â”‚   â”‚   â””â”€â”€ map.js          # åœ°å›¾è„šæœ¬
â”‚   â””â”€â”€ 3d_models/          # 3Dæ¨¡å‹æ–‡ä»¶å¤¹
â””â”€â”€ README.md
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. ä¸Šä¼ åˆ°æœåŠ¡å™¨
```bash
scp WaterOfLeith_WebMap_v4.zip s2814398@scotia:~/
ssh s2814398@scotia
unzip WaterOfLeith_WebMap_v4.zip
cd webmap_v4
```

### 2. ä¿®æ”¹æ•°æ®åº“å¯†ç 
ç¼–è¾‘ `backend/app.py` ç¬¬24è¡Œ:
```python
'password': 'ä½ çš„å®é™…å¯†ç ',
```

### 3. å®‰è£…ä¾èµ–å¹¶å¯åŠ¨åç«¯
```bash
cd backend
pip install -r requirements.txt --user
python app.py
```
åç«¯å°†åœ¨ http://localhost:5000 è¿è¡Œ

### 4. ä¿®æ”¹å‰ç«¯APIåœ°å€
ç¼–è¾‘ `frontend/js/map.js` ç¬¬8è¡Œ:
```javascript
const API_BASE_URL = 'http://ä½ çš„æœåŠ¡å™¨åœ°å€:5000/api';
```

### 5. å¯åŠ¨å‰ç«¯
```bash
cd ../frontend
python -m http.server 8080
```
è®¿é—® http://æœåŠ¡å™¨åœ°å€:8080

## ğŸ“Š APIç«¯ç‚¹

| ç«¯ç‚¹ | å‚æ•° | è¯´æ˜ |
|------|------|------|
| `/api/simd_zones` | `risk_level`, `min`, `max` | SIMDåŒºåŸŸ(ä½¿ç”¨SIMD_DECILE) |
| `/api/greenspaces` | `type`, `min_storage`, `max_storage` | ç»¿åœ°æ•°æ® |
| `/api/flood_damage` | `type`, `min_value`, `max_value` | å»ºç­‘æŸå¤± |
| `/api/flood_zones` | `depth` | æ´ªæ°´åŒºåŸŸ |
| `/api/export/<type>` | `format` | æ•°æ®å¯¼å‡º |
| `/api/summary` | - | æ±‡æ€»ç»Ÿè®¡ |
| `/api/damage_by_category` | - | æŒ‰ç±»å‹ç»Ÿè®¡ |
| `/api/greenspace_ranking` | `limit` | ç»¿åœ°æ’å |

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **SIMDåˆ†ç±»è¯´æ˜**:
   - SIMD Decile 1 = æœ€è´«å›°åŒºåŸŸ (é«˜è„†å¼±æ€§)
   - SIMD Decile 10 = æœ€å¯Œè£•åŒºåŸŸ (ä½è„†å¼±æ€§)

2. **3Dæ¨¡å‹**: ç¡®ä¿3d_modelsæ–‡ä»¶å¤¹åŒ…å«æ‰€æœ‰10ä¸ªå…³é”®ç»¿åœ°çš„æ¨¡å‹

3. **æ•°æ®åº“è¿æ¥**: ç¡®ä¿Oracleå®¢æˆ·ç«¯å·²æ­£ç¡®é…ç½®

## ğŸ› å·²ä¿®å¤é—®é¢˜

- [x] SIMDç­›é€‰ä¸å·¥ä½œ (æ”¹ç”¨SIMD_DECILEå­—æ®µ)
- [x] é¦–é¡µæ•°å­—æ²¡æœ‰æ»šåŠ¨åŠ¨ç”»
- [x] é¦–é¡µè‡ªåŠ¨æ»šåˆ°åº•éƒ¨
- [x] ä¾§è¾¹æ æ”¶èµ·åæ— æ³•å±•å¼€

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³» s2814398@ed.ac.uk
